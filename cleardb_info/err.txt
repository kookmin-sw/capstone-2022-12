DB 에러 처리..

heroku clearDB 무료버전에서는 정해진 이름의 DB만 사용가능 heroku_d4b1a4548f6a83d
https://stackoverflow.com/questions/25446937/mysql-access-denied-for-user-to-database/25447163
sql에서 aid_db > heroku_d4b1a4548f6a83d 바꿔서 하기!!

DB export , import 하기
https://velog.io/@leitmotif/2-Heroku%EC%97%90-MySQL-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0
DB연결은 일단 완료


createConnection >> createPool
https://snakehips.tistory.com/entry/Heroku-ClearDB-CORS-error-PROTOCOLCONNECTIONLOST-code-H10-App-crashed
바꾸기 전엔 일단 되긴 했는데 바꾸니까 그냥 안됨..
어쨌든 연결이 끊어져서 생기는 문제인듯
또한, 경로 설정 다시 잘 해줘야할듯
>> 결론: pool안씀.. 경로설정 바꾸니까 잘 작동

서버 올렸더니 DB 서버가 계속 끊어지는 문제 발생..
> 끊어질때마다 처리해줘야함
https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=mingjn&logNo=221051145760



response = requests.post("https://aid-kookmin.herokuapp.com/talk", json={"serial":"serial1", "talk":"nono2","emotion":"depressed"})
다른 곳으로부터 request받아 db에 log insert할 때 문제 발생
1. connection이 자꾸 끊어져서 그런것 같음 > mysql 설정을 바꿔보자 
https://blog.naver.com/PostView.naver?blogId=rnjsrldnd123&logNo=221482042732&parentCategoryNo=31&categoryNo=&viewDate=&isShowPopularPosts=true&from=search
 >> heroku에서 db설정파일 바꿀수 있는지도 모르고, 결론은 이거 아님

 2. NOW()함수가 반영이 안됐음.. 

 client.query('insert into log(date, emotion, talk, user_Serial_Number) values(?,?,?,?)', [NOW(), emotion, talk, serial]); (x)
 client.query('insert into log(date, emotion, talk, user_Serial_Number) values(NOW(),?,?,?)', [emotion, talk, serial]); (o)
 DATE_ADD(NOW(), INTERVAL 9 HOUR) // 시간 맞춰주기
